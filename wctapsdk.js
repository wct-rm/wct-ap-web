class WCTAPSDK{static #a;constructor(){if(WCTAPSDK.#a)throw Error("WCTAPSDK is a singleton. Use getInstance() to access the instance.");this.visitorIdCookie="wctVisitorId",this.customerIdCookie="wctCustomerId",this.disableCookies=!1}static getInstance(){return WCTAPSDK.#a||(WCTAPSDK.#a=new WCTAPSDK),WCTAPSDK.#a}generateWctVisitorId(){if(this.disableCookies)return;let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return Array.from({length:22},()=>e.charAt(Math.floor(Math.random()*e.length))).join("")}ensureWctVisitorId(){let e=this.getCookie(this.visitorIdCookie);e||(e=this.generateWctVisitorId(),this.setCookie(this.visitorIdCookie,e,730))}setCookie(e,t,i){if(this.disableCookies)return;let r=new Date;r.setTime(r.getTime()+864e5*i),document.cookie=`${e}=${t};expires=${r.toUTCString()};path=/`}getCookie(e){if(this.disableCookies)return null;let t=`${e}=`,i=document.cookie.split(";");for(let r of i){let s=r.trim();if(s.startsWith(t))return s.substring(t.length)}return null}getBrowserContext(){return{browser_context:{pv_id:encodeURIComponent(this.getCookie(this.visitorIdCookie)),rpv_id:encodeURIComponent(this.getCookie(this.visitorIdCookie)),ts:Date.now(),u:window.location.href}}}isMobileUser(){return/android|iphone|ipad|ipod|blackberry|windows phone|mobile/i.test(navigator.userAgent||navigator.vendor||window.opera)}getUniversalParams(){let e={tenantId:encodeURIComponent(this.tenantId),visitorId:encodeURIComponent(this.getCookie(this.visitorIdCookie)),version:"1.0.0",platform:this.isMobileUser()?"mobile":"desktop"},t=this.getCookie(this.customerIdCookie);return t&&t.length>0&&(e.customerId=encodeURIComponent(t)),e}updateQueryParam(e,t,i){let r=new URL(e);return r.searchParams.set(t,i),r.toString()}async makeGetRequest(e){return{}}async makePostRequest(e,t){return{}}static initialize(e,t={}){if(!e)throw Error("tenantId is required to initialize the SDK.");let i=WCTAPSDK.getInstance();i.tenantId=e,i.disableCookies=t.disableCookies||!1,i.beaconURL="https://sp-beacon-service-wct.dev.walmart.com",i.orderURL="https://sp-beacon-service-wct.dev.walmart.com",i.ensureWctVisitorId()}static setCustomerId(e){let t=WCTAPSDK.getInstance();t.setCookie(t.customerIdCookie,e,730)}static clearCustomerId(){let e=WCTAPSDK.getInstance();e.setCookie(e.customerIdCookie,"",-1)}static async trackSponsoredClick(e){if(!e)throw Error("On Click Beacon is required.");try{new URL(e)}catch(t){throw Error("Invalid On Click Beacon URL")}let i=WCTAPSDK.getInstance();var r=i.getUniversalParams();delete r.tenantId;let s=new URLSearchParams({...r,rdf:0}).toString();var o=`${e}${e.includes("?")?"&":"?"}${s}`;return o=i.updateQueryParam(o,"bt",1),i.makeGetRequest(o)}static async trackSponsoredImpression(e,t){if(!e||!t)throw Error("adModuleInfo and impressionBeacons are required for trackSponsoredImpression.");let i=WCTAPSDK.getInstance();if(!i.tenantId||!i.beaconURL)throw Error("SDK not initialized. Call initialize() first.");return i.makePostRequest(`${i.beaconURL}/sp/trk/im`,{impressions:[{adModuleInfo:e,impressionBeacons:t,...i.getUniversalParams(),...i.getBrowserContext()}]})}static async trackSponsoredView(e,t){if(!e||!t)throw Error("adModuleInfo and impressionBeacons are required for trackSponsoredView.");let i=WCTAPSDK.getInstance();if(!i.tenantId||!i.beaconURL)throw Error("SDK not initialized. Call initialize() first.");return i.makePostRequest(`${i.beaconURL}/sp/trk/view`,{views:[{adModuleInfo:e,impressionBeacons:t,...i.getUniversalParams(),...i.getBrowserContext()}]})}static async trackSponsoredNoAd(e){if(!e)throw Error("adModuleInfo is required for trackSponsoredNoAd.");let t=WCTAPSDK.getInstance();if(!t.tenantId||!t.beaconURL)throw Error("SDK not initialized. Call initialize() first.");return t.makePostRequest(`${t.beaconURL}/sp/trk/noad`,{noads:[{adModuleInfo:e,...t.getUniversalParams(),...t.getBrowserContext()}]})}static async trackOrder(e){if(!e)throw Error("order is required for trackOrder.");let t=WCTAPSDK.getInstance();if(!t.tenantId||!t.orderURL)throw Error("SDK not initialized. Call initialize() first.");return t.makePostRequest(`${t.orderURL}/sp/trk/order`,{...e,...t.getUniversalParams(),...t.getBrowserContext()})}}class WCTAPOrder{constructor(e,t,i,r,s,o){this.orderId=e,this.orderTotal=t,this.orderSubtotal=i,this.orderTax=r,this.items=s,this.purchaseTime=o;let n=new Date(o);isNaN(n.getTime())||(this.ds=n.toISOString().split("T")[0],this.hour=n.getHours())}}class WCTAPOrderItem{constructor(e,t,i,r){this.itemId=e,this.quantity=t,this.unitPrice=i,this.totalPrice=r,this.sellerId="0"}}